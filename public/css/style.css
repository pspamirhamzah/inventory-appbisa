const renderKPI = (stats) => {
        const updateCard = (key, data) => {
            const real = data.curr[key].real;
            const target = data.curr[key].target;
            const prev = data.prev[key].real;
            
            // Hitung Persentase
            const pct = target > 0 ? (real / target * 100) : 0;
            
            // 1. Update Angka Realisasi
            const elReal = document.getElementById(`val-${key.toLowerCase()}-real`);
            if(elReal) elReal.innerText = formatNumber(real);
            
            // 2. Update Angka Target (Desktop)
            const elTarget = document.getElementById(`val-${key.toLowerCase()}-target`);
            if(elTarget) elTarget.innerText = formatNumber(target);
            
            // 3. Update Progress Bar
            const elProg = document.getElementById(`prog-${key.toLowerCase()}`);
            if(elProg) elProg.style.width = Math.min(pct, 100) + '%';

            // 4. Update Persentase di Mobile (ELEMEN BARU)
            const elMobPct = document.getElementById(`mob-pct-${key.toLowerCase()}`);
            if(elMobPct) elMobPct.innerText = pct.toFixed(1) + '%';

            // 5. Hitung Growth YoY
            let growth = 0; let isUp = true;
            if(prev > 0) { growth = ((real - prev) / prev) * 100; isUp = growth >= 0; } 
            else if (real > 0) growth = 100;

            const badge = document.getElementById(`growth-${key.toLowerCase()}-badge`);
            if(badge) {
                badge.className = `growth-badge ${isUp ? 'growth-up' : 'growth-down'}`;
                badge.innerHTML = `<i class="fas fa-arrow-${isUp ? 'up' : 'down'}"></i> ${Math.abs(growth).toFixed(1)}%`;
            }
        };
        updateCard('UREA', stats);
        updateCard('NPK', stats);
    };
